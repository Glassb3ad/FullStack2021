{"version":3,"sources":["components/AddNewName.jsx","components/ListNumbers.jsx","components/Filter.jsx","services/numbers.jsx","App.js","index.js"],"names":["AddNewName","props","onSubmit","addNewName","value","newName","onChange","handleNewName","newNumber","handleNewNumber","type","ListNumbers","filteredPersons","map","a","i","name","number","onClick","deleteName","Filter","newFilter","handleNewFilter","baseUrl","numberService","getAll","axios","get","create","newObject","post","update","id","put","deleteId","delete","Notification","message","className","ErrorNotification","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","setNewFilteredPersons","NotiMessage","setNotiMessage","errorMessage","setErrorMessage","useEffect","console","log","then","response","data","event","temp","filter","toLowerCase","includes","target","preventDefault","personsnames","person","window","alert","confirm","find","personObject","response2","setTimeout","catch","error","addNewNameToServer","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1312619f.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst AddNewName = (props) => {\r\n    return(\r\n      <form onSubmit={props.addNewName}>\r\n      <div>\r\n        name: <input value={props.newName} onChange = {props.handleNewName} />\r\n      </div>\r\n      <br/>\r\n      <div>number: <input value={props.newNumber} onChange = {props.handleNewNumber}/></div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n    )\r\n}\r\nexport default AddNewName","import React from \"react\"\r\nconst ListNumbers = (props) => {\r\n    return(\r\n      <ul>\r\n        {props.filteredPersons.map((a,i) => \r\n        <li key={i} >\r\n          {a.name} {a.number} <button onClick ={() => props.deleteName(a)}>delete</button> \r\n        </li>) }\r\n      </ul>\r\n    )\r\n  }\r\n\r\nexport default ListNumbers","import React from \"react\"\r\nconst Filter = (props) => {\r\n    return(  \r\n      <form>\r\n        <div>Filter names with <input value={props.newFilter} onChange = {props.handleNewFilter}/></div>\r\n      </form>\r\n    )\r\n}\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = 'api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nconst deleteId = (id) =>\r\n    {return axios.delete(`${baseUrl}/${id}`)}\r\n\r\nconst numberService = { \r\n    getAll: getAll, \r\n    create: create, \r\n    update: update,\r\n    deleteId \r\n  }\r\nexport default numberService","import React, { useState, useEffect } from 'react'\nimport AddNewName from './components/AddNewName'\nimport ListNumbers from \"./components/ListNumbers\"\nimport Filter from \"./components/Filter\"\nimport numberService from './services/numbers'\nimport './index.css'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"noti\">\n      {message}\n    </div>\n  )\n}\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [newFilter, setNewFilter ] = useState('')\n  const [filteredPersons, setNewFilteredPersons] =useState(persons)\n  const [NotiMessage, setNotiMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    numberService\n      .getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response.data)\n        setNewFilteredPersons(response.data)\n      })\n  },[])\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleNewFilter = (event) => {\n    const temp = persons.filter(a => (a.name.toLowerCase()).includes(event.target.value.toLowerCase())) \n    setNewFilteredPersons(temp)\n    setNewFilter(event.target.value)\n  }\n  const addNewNameToServer = (person) => {\n    numberService\n    .create(person)\n    .then(response => {\n      console.log(response)\n    })\n    .catch(error => {\n      console.log(error.response.data.error)\n      setErrorMessage(error.response.data.error)\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    })\n  }\n  const addNewName = (event) => {\n    event.preventDefault()\n    const personsnames = persons.map(person => person.name)\n    if(!personsnames.includes(newName) && (newName !== '' && newNumber !== '')){\n      const personObject = {name: newName, number: newNumber}\n      addNewNameToServer(personObject)\n      numberService\n      .getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response.data)\n        const temp = response.data.filter(a => (a.name.toLowerCase()).includes(newFilter.toLowerCase())) \n        setNewFilteredPersons(temp) \n        if(newName.length >=3 && newNumber.length >= 8){\n          setNotiMessage(\n            `${newName} has been added`\n          )\n          setTimeout(() => {\n            setNotiMessage(null)\n          }, 5000)\n        }  \n      })\n      }\n      \n    else if(personsnames.includes(newName)){\n      window.alert(`${newName} is already added to phonebook`)\n      const result = window.confirm(\"Want to replace the old number with a new one?\")\n      if(result){\n        const person = persons.find(a => a.name === newName)\n        console.log(person)\n        const personObject = {name: person.name, number: newNumber, id: person.id}\n        numberService\n          .update(person.id, personObject)\n          .then((response) =>{\n            console.log(response)\n            numberService\n            .getAll()\n            .then(response2 => {\n              console.log('promise fulfilled')\n              setPersons(response2.data)\n              const temp = response2.data.filter(a => (a.name.toLowerCase()).includes(newFilter.toLowerCase())) \n              setNewFilteredPersons(temp)\n            })\n            setNotiMessage(\n              `Number of '${newName}' has been changed`\n            )\n            setTimeout(() => {\n              setNotiMessage(null)\n            }, 5000)\n          })\n      }\n    }\n    setNewName(\"\")\n    setNewNumber('')\n    //console.log(personsnames)\n  }\n\n  const deleteName = (person) => {\n    const result = window.confirm(`Are you sure, you want to delete ${person.name}`)\n    if(result){\n      numberService\n        .deleteId(person.id)\n        .then((response) => {\n          console.log(response)\n          numberService\n          .getAll()\n          .then(response2 => {\n            console.log('promise fulfilled')\n            setPersons(response2.data)\n            const temp = response2.data.filter(a => (a.name.toLowerCase()).includes(newFilter.toLowerCase())) \n            setNewFilteredPersons(temp)  \n          })\n          setNotiMessage(\n            `${person.name} has been deleted`\n          )\n          setTimeout(() => {\n            setNotiMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setErrorMessage(\n            `Name '${person.name}' was already removed from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    } \n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <ErrorNotification message={errorMessage}/>\n      <Notification message={NotiMessage} />\n      <Filter newFilter = {newFilter} handleNewFilter = {handleNewFilter}/>\n      <h2>Add a new</h2>\n      <AddNewName newName = {newName} handleNewName={handleNewName} newNumber={newNumber} handleNewNumber = {handleNewNumber} addNewName = {addNewName}/>\n      <h2>Numbers</h2>\n      <ListNumbers filteredPersons = {filteredPersons} deleteName = {deleteName}/>\n    </div>\n  )\n\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}