(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),a=t(3),l=t(1),r=t(0),u=function(e){return Object(r.jsxs)("form",{onSubmit:e.addNewName,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.newName,onChange:e.handleNewName})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:e.newNumber,onChange:e.handleNewNumber})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},i=function(e){return Object(r.jsx)("ul",{children:e.filteredPersons.map((function(n,t){return Object(r.jsxs)("li",{children:[n.name," ",n.number," ",Object(r.jsx)("button",{onClick:function(){return e.deleteName(n)},children:"delete"})]},t)}))})},s=function(e){return Object(r.jsx)("form",{children:Object(r.jsxs)("div",{children:["Filter names with ",Object(r.jsx)("input",{value:e.newFilter,onChange:e.handleNewFilter})]})})},d=t(4),f=t.n(d),j="api/persons",b={getAll:function(){return f.a.get(j)},create:function(e){return f.a.post(j,e)},update:function(e,n){return f.a.put("".concat(j,"/").concat(e),n)},deleteId:function(e){return f.a.delete("".concat(j,"/").concat(e))}},m=(t(40),function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"noti",children:n})}),h=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"error",children:n})},O=function(){var e=Object(l.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(l.useState)(""),d=Object(a.a)(o,2),f=d[0],j=d[1],O=Object(l.useState)(""),w=Object(a.a)(O,2),g=w[0],p=w[1],v=Object(l.useState)(""),x=Object(a.a)(v,2),N=x[0],C=x[1],L=Object(l.useState)(t),S=Object(a.a)(L,2),A=S[0],y=S[1],k=Object(l.useState)(null),F=Object(a.a)(k,2),T=F[0],I=F[1],P=Object(l.useState)(null),E=Object(a.a)(P,2),J=E[0],B=E[1];Object(l.useEffect)((function(){console.log("effect"),b.getAll().then((function(e){console.log("promise fulfilled"),c(e.data),y(e.data)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(h,{message:J}),Object(r.jsx)(m,{message:T}),Object(r.jsx)(s,{newFilter:N,handleNewFilter:function(e){var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));y(n),C(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(u,{newName:f,handleNewName:function(e){j(e.target.value)},newNumber:g,handleNewNumber:function(e){p(e.target.value)},addNewName:function(e){e.preventDefault();var n=t.map((function(e){return e.name}));if(n.includes(f)||""===f||""===g){if(n.includes(f)){if(window.alert("".concat(f," is already added to phonebook")),window.confirm("Want to replace the old number with a new one?")){var o=t.find((function(e){return e.name===f}));console.log(o);var a={name:o.name,number:g,id:o.id};b.update(o.id,a).then((function(e){console.log(e),b.getAll().then((function(e){console.log("promise fulfilled"),c(e.data);var n=e.data.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));y(n)})),I("Number of '".concat(f,"' has been changed")),setTimeout((function(){I(null)}),5e3)}))}}}else!function(e){b.create(e).then((function(e){console.log(e)})).catch((function(e){console.log(e.response.data.error),B(e.response.data.error),setTimeout((function(){B(null)}),5e3)}))}({name:f,number:g}),b.getAll().then((function(e){console.log("promise fulfilled"),c(e.data);var n=e.data.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));y(n),f.length>=3&&g.length>=8&&(I("".concat(f," has been added")),setTimeout((function(){I(null)}),5e3))}));j(""),p("")}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(i,{filteredPersons:A,deleteName:function(e){window.confirm("Are you sure, you want to delete ".concat(e.name))&&b.deleteId(e.id).then((function(n){console.log(n),b.getAll().then((function(e){console.log("promise fulfilled"),c(e.data);var n=e.data.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));y(n)})),I("".concat(e.name," has been deleted")),setTimeout((function(){I(null)}),5e3)})).catch((function(n){B("Name '".concat(e.name,"' was already removed from server")),setTimeout((function(){B(null)}),5e3)}))}})]})};o.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.1312619f.chunk.js.map